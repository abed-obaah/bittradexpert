!function(e,t){"use strict";let n=document.documentElement.lang;function c(e){return e.hasOwnProperty(n)?e[n]:n}e.behaviors.chat2desk={attach:function(e){let n=document.documentElement.lang,o=t.chat2_desk.config,a=t.chat2_desk.settings,s=u(o.schedule.timezone),i=Object.keys(o.schedule.days),d=o.schedule.days[i[function(e){const t=e.getDay();return 0===t?6:t-1}(s)]],l=h(d.from.hours,d.from.min),r=h(d.to.hours,d.to.min);function u(e){const t=(new Date).toLocaleString("en-US",{timeZone:e});return new Date(t)}function h(e,t){const n=u(o.timezone);return n.setHours(e),n.setMinutes(t),n.setSeconds(0),n}function m(){window.chat24_token=o.chat24ID_override[n]?o.chat24ID_override[n]:o.chat24ID,window.chat24_url=o.general.url,window.chat24_socket_url="wss://livechatv2.chat2desk.com/widget_ws_new",window.chat24_show_new_wysiwyg="true",window.chat24_static_files_domain="https://storage.chat2desk.com/",window.lang=c(o.chat24io_lang),window.fetch("".concat(window.chat24_url,"/packs/manifest.json?nocache=").concat((new Date).getTime())).then(function(e){return e.json()}).then(function(e){const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="".concat(window.chat24_url).concat(e["application.js"]).concat("?flushcache=18-11-21"),document.body.appendChild(t),console.log("finished")})}if(!o.general.disable&&(!Object.keys(o.languages).length||o.languages.hasOwnProperty(n))&&(1!==o.schedule.apply_schedule||0!==d.from.hours||0!==d.to.hours)&&(1!==o.schedule.apply_schedule||s.getTime()>=l&&s.getTime()<=r))if(a&&a.status){const e=document.createElement("img");e.src=a.icon,e.loading="lazy",e.addEventListener("error",function(e){t.style.display="none"}),e.className="chat-placeholder__img";const t=document.createElement("div");t.appendChild(e),t.className="chat-placeholder__button",t.addEventListener("click",function(){m(),document.addEventListener("initialize_widget",function(){n.remove();const e=document.querySelector("chat-24").shadowRoot.querySelector(".startBtn");e&&setTimeout(()=>{e.click()},0)})});const n=document.createElement("div");n.appendChild(t),n.className="chat-placeholder",document.body.appendChild(n)}else m()}}}(Drupal,drupalSettings);